<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Data Structures | R Programming for Data Sciences</title>
  <meta name="description" content="Chapter 4 Data Structures | R Programming for Data Sciences" />
  <meta name="generator" content="bookdown 0.10 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Data Structures | R Programming for Data Sciences" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Data Structures | R Programming for Data Sciences" />
  
  
  

<meta name="author" content="Andrew O. Finley, Vince Melfi, Jeffrey W. Doser" />


<meta name="date" content="2019-05-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="scripts-and-r-markdown.html">
<link rel="next" href="graphics-in-r.html">
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Course Description</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html"><i class="fa fa-check"></i><b>2</b> Introduction to R and RStudio</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#obtaining-and-installing-r"><i class="fa fa-check"></i><b>2.1</b> Obtaining and Installing R</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#obtaining-and-installing-rstudio"><i class="fa fa-check"></i><b>2.2</b> Obtaining and Installing RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#using-r-and-rstudio"><i class="fa fa-check"></i><b>2.3</b> Using R and RStudio</a><ul>
<li class="chapter" data-level="2.3.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#r-as-a-calculator"><i class="fa fa-check"></i><b>2.3.1</b> R as a Calculator</a></li>
<li class="chapter" data-level="2.3.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#dec"><i class="fa fa-check"></i><b>2.3.2</b> Basic descriptive statistics and graphics in R</a></li>
<li class="chapter" data-level="2.3.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#an-initial-tour-of-rstudio"><i class="fa fa-check"></i><b>2.3.3</b> An Initial Tour of RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#getting-help"><i class="fa fa-check"></i><b>2.4</b> Getting Help</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#workspace-working-directory-and-keeping-organized"><i class="fa fa-check"></i><b>2.5</b> Workspace, Working Directory, and Keeping Organized</a></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#quality-of-r-code"><i class="fa fa-check"></i><b>2.6</b> Quality of R code</a><ul>
<li class="chapter" data-level="2.6.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#naming-files"><i class="fa fa-check"></i><b>2.6.1</b> Naming Files</a></li>
<li class="chapter" data-level="2.6.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#naming-variables"><i class="fa fa-check"></i><b>2.6.2</b> Naming Variables</a></li>
<li class="chapter" data-level="2.6.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#syntax"><i class="fa fa-check"></i><b>2.6.3</b> Syntax</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="scripts-and-r-markdown.html"><a href="scripts-and-r-markdown.html"><i class="fa fa-check"></i><b>3</b> Scripts and R Markdown</a><ul>
<li class="chapter" data-level="3.1" data-path="scripts-and-r-markdown.html"><a href="scripts-and-r-markdown.html#scripts-in-r"><i class="fa fa-check"></i><b>3.1</b> Scripts in R</a></li>
<li class="chapter" data-level="3.2" data-path="scripts-and-r-markdown.html"><a href="scripts-and-r-markdown.html#r-markdown"><i class="fa fa-check"></i><b>3.2</b> R Markdown</a><ul>
<li class="chapter" data-level="3.2.1" data-path="scripts-and-r-markdown.html"><a href="scripts-and-r-markdown.html#creating-and-processing-r-markdown-documents"><i class="fa fa-check"></i><b>3.2.1</b> Creating and Processing R Markdown Documents</a></li>
<li class="chapter" data-level="3.2.2" data-path="scripts-and-r-markdown.html"><a href="scripts-and-r-markdown.html#output-formats-other-than-html"><i class="fa fa-check"></i><b>3.2.2</b> Output Formats other than HTML</a></li>
<li class="chapter" data-level="3.2.3" data-path="scripts-and-r-markdown.html"><a href="scripts-and-r-markdown.html#latex-knitr-and-bookdown"><i class="fa fa-check"></i><b>3.2.3</b> LaTeX, <code>knitr</code>, and <code>bookdown</code></a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="scripts-and-r-markdown.html"><a href="scripts-and-r-markdown.html#practice-exercises"><i class="fa fa-check"></i><b>3.3</b> Practice Exercises</a></li>
<li class="chapter" data-level="3.4" data-path="scripts-and-r-markdown.html"><a href="scripts-and-r-markdown.html#homework"><i class="fa fa-check"></i><b>3.4</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="structures.html"><a href="structures.html"><i class="fa fa-check"></i><b>4</b> Data Structures</a><ul>
<li class="chapter" data-level="4.1" data-path="structures.html"><a href="structures.html#vector"><i class="fa fa-check"></i><b>4.1</b> Vectors</a><ul>
<li class="chapter" data-level="4.1.1" data-path="structures.html"><a href="structures.html#types-conversion-coercion"><i class="fa fa-check"></i><b>4.1.1</b> Types, Conversion, Coercion</a></li>
<li class="chapter" data-level="4.1.2" data-path="structures.html"><a href="structures.html#accessing-specific-elements-of-vectors"><i class="fa fa-check"></i><b>4.1.2</b> Accessing Specific Elements of Vectors</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="structures.html"><a href="structures.html#factors"><i class="fa fa-check"></i><b>4.2</b> Factors</a></li>
<li class="chapter" data-level="4.3" data-path="structures.html"><a href="structures.html#names-of-objects-in-r"><i class="fa fa-check"></i><b>4.3</b> Names of Objects in R</a></li>
<li class="chapter" data-level="4.4" data-path="structures.html"><a href="structures.html#missing-data-infinity-etc."><i class="fa fa-check"></i><b>4.4</b> Missing Data, Infinity, etc.</a><ul>
<li class="chapter" data-level="4.4.1" data-path="structures.html"><a href="structures.html#infinity-and-nan"><i class="fa fa-check"></i><b>4.4.1</b> Infinity and NaN</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="structures.html"><a href="structures.html#dataFrames"><i class="fa fa-check"></i><b>4.5</b> Data Frames</a><ul>
<li class="chapter" data-level="4.5.1" data-path="structures.html"><a href="structures.html#accessing-specific-elements-of-data-frames"><i class="fa fa-check"></i><b>4.5.1</b> Accessing Specific Elements of Data Frames</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="structures.html"><a href="structures.html#lists"><i class="fa fa-check"></i><b>4.6</b> Lists</a><ul>
<li class="chapter" data-level="4.6.1" data-path="structures.html"><a href="structures.html#accessing-specific-elements-of-lists"><i class="fa fa-check"></i><b>4.6.1</b> Accessing Specific Elements of Lists</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="structures.html"><a href="structures.html#subsetting"><i class="fa fa-check"></i><b>4.7</b> Subsetting with Logical Vectors</a><ul>
<li class="chapter" data-level="4.7.1" data-path="structures.html"><a href="structures.html#modifying-or-creating-objects-via-subsetting"><i class="fa fa-check"></i><b>4.7.1</b> Modifying or Creating Objects via Subsetting</a></li>
<li class="chapter" data-level="4.7.2" data-path="structures.html"><a href="structures.html#logical-subsetting-and-data-frames"><i class="fa fa-check"></i><b>4.7.2</b> Logical Subsetting and Data Frames</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="structures.html"><a href="structures.html#patterned-data"><i class="fa fa-check"></i><b>4.8</b> Patterned Data</a></li>
<li class="chapter" data-level="4.9" data-path="structures.html"><a href="structures.html#practice-exercises-1"><i class="fa fa-check"></i><b>4.9</b> Practice Exercises</a></li>
<li class="chapter" data-level="4.10" data-path="structures.html"><a href="structures.html#homework-1"><i class="fa fa-check"></i><b>4.10</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="graphics-in-r.html"><a href="graphics-in-r.html"><i class="fa fa-check"></i><b>5</b> Graphics in R</a><ul>
<li class="chapter" data-level="5.1" data-path="graphics-in-r.html"><a href="graphics-in-r.html#scatter-plots"><i class="fa fa-check"></i><b>5.1</b> Scatter Plots</a><ul>
<li class="chapter" data-level="5.1.1" data-path="graphics-in-r.html"><a href="graphics-in-r.html#structure-of-a-typical-ggplot"><i class="fa fa-check"></i><b>5.1.1</b> Structure of a Typical <code>ggplot</code></a></li>
<li class="chapter" data-level="5.1.2" data-path="graphics-in-r.html"><a href="graphics-in-r.html#adding-lines-to-a-scatter-plot"><i class="fa fa-check"></i><b>5.1.2</b> Adding lines to a scatter plot</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="graphics-in-r.html"><a href="graphics-in-r.html#labels-axes-text-etc."><i class="fa fa-check"></i><b>5.2</b> Labels, Axes, Text, etc.</a><ul>
<li class="chapter" data-level="5.2.1" data-path="graphics-in-r.html"><a href="graphics-in-r.html#labels"><i class="fa fa-check"></i><b>5.2.1</b> Labels</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="graphics-in-r.html"><a href="graphics-in-r.html#customizing-axes"><i class="fa fa-check"></i><b>5.3</b> Customizing Axes</a><ul>
<li class="chapter" data-level="5.3.1" data-path="graphics-in-r.html"><a href="graphics-in-r.html#text-point-size-and-color"><i class="fa fa-check"></i><b>5.3.1</b> Text, Point Size, and Color</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="graphics-in-r.html"><a href="graphics-in-r.html#other-types-of-graphics"><i class="fa fa-check"></i><b>5.4</b> Other Types of Graphics</a><ul>
<li class="chapter" data-level="5.4.1" data-path="graphics-in-r.html"><a href="graphics-in-r.html#histograms"><i class="fa fa-check"></i><b>5.4.1</b> Histograms</a></li>
<li class="chapter" data-level="5.4.2" data-path="graphics-in-r.html"><a href="graphics-in-r.html#boxplots"><i class="fa fa-check"></i><b>5.4.2</b> Boxplots</a></li>
<li class="chapter" data-level="5.4.3" data-path="graphics-in-r.html"><a href="graphics-in-r.html#bar-graphs"><i class="fa fa-check"></i><b>5.4.3</b> Bar Graphs</a></li>
<li class="chapter" data-level="5.4.4" data-path="graphics-in-r.html"><a href="graphics-in-r.html#graphs-of-functions"><i class="fa fa-check"></i><b>5.4.4</b> Graphs of Functions</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="graphics-in-r.html"><a href="graphics-in-r.html#themes"><i class="fa fa-check"></i><b>5.5</b> Themes</a></li>
<li class="chapter" data-level="5.6" data-path="graphics-in-r.html"><a href="graphics-in-r.html#saving-graphics"><i class="fa fa-check"></i><b>5.6</b> Saving Graphics</a></li>
<li class="chapter" data-level="5.7" data-path="graphics-in-r.html"><a href="graphics-in-r.html#more-resources"><i class="fa fa-check"></i><b>5.7</b> More Resources</a></li>
<li class="chapter" data-level="5.8" data-path="graphics-in-r.html"><a href="graphics-in-r.html#practice-exercises-2"><i class="fa fa-check"></i><b>5.8</b> Practice Exercises</a></li>
<li class="chapter" data-level="5.9" data-path="graphics-in-r.html"><a href="graphics-in-r.html#homework-2"><i class="fa fa-check"></i><b>5.9</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data2.html"><a href="data2.html"><i class="fa fa-check"></i><b>6</b> Working with Data</a><ul>
<li class="chapter" data-level="6.1" data-path="data2.html"><a href="data2.html#reading-data-into-r"><i class="fa fa-check"></i><b>6.1</b> Reading Data into R</a></li>
<li class="chapter" data-level="6.2" data-path="data2.html"><a href="data2.html#reading-data-with-missing-observations"><i class="fa fa-check"></i><b>6.2</b> Reading Data with Missing Observations</a></li>
<li class="chapter" data-level="6.3" data-path="data2.html"><a href="data2.html#summarizing-data-frames"><i class="fa fa-check"></i><b>6.3</b> Summarizing Data Frames</a><ul>
<li class="chapter" data-level="6.3.1" data-path="data2.html"><a href="data2.html#column-and-row-summaries"><i class="fa fa-check"></i><b>6.3.1</b> Column (and Row) Summaries</a></li>
<li class="chapter" data-level="6.3.2" data-path="data2.html"><a href="data2.html#apply"><i class="fa fa-check"></i><b>6.3.2</b> The <code>apply()</code> Function</a></li>
<li class="chapter" data-level="6.3.3" data-path="data2.html"><a href="data2.html#saving-typing-using-with"><i class="fa fa-check"></i><b>6.3.3</b> Saving Typing Using <code>with()</code></a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="data2.html"><a href="data2.html#transforming-a-data-frame"><i class="fa fa-check"></i><b>6.4</b> Transforming a Data Frame</a><ul>
<li class="chapter" data-level="6.4.1" data-path="data2.html"><a href="data2.html#adding-variables"><i class="fa fa-check"></i><b>6.4.1</b> Adding Variables</a></li>
<li class="chapter" data-level="6.4.2" data-path="data2.html"><a href="data2.html#removing-variables"><i class="fa fa-check"></i><b>6.4.2</b> Removing Variables</a></li>
<li class="chapter" data-level="6.4.3" data-path="data2.html"><a href="data2.html#transforming-variables"><i class="fa fa-check"></i><b>6.4.3</b> Transforming Variables</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="data2.html"><a href="data2.html#rearranging-variables"><i class="fa fa-check"></i><b>6.5</b> Rearranging Variables</a></li>
<li class="chapter" data-level="6.6" data-path="data2.html"><a href="data2.html#reshaping-data"><i class="fa fa-check"></i><b>6.6</b> Reshaping Data</a><ul>
<li class="chapter" data-level="6.6.1" data-path="data2.html"><a href="data2.html#tidyr"><i class="fa fa-check"></i><b>6.6.1</b> <code>tidyr</code></a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="data2.html"><a href="data2.html#manipulating-data-with-dplyr-dplyr"><i class="fa fa-check"></i><b>6.7</b> Manipulating Data with <code>dplyr</code> #{dplyr}</a><ul>
<li class="chapter" data-level="6.7.1" data-path="data2.html"><a href="data2.html#improved-data-frames"><i class="fa fa-check"></i><b>6.7.1</b> Improved Data Frames</a></li>
<li class="chapter" data-level="6.7.2" data-path="data2.html"><a href="data2.html#filtering-data-by-row"><i class="fa fa-check"></i><b>6.7.2</b> Filtering Data by Row</a></li>
<li class="chapter" data-level="6.7.3" data-path="data2.html"><a href="data2.html#selecting-variables-by-column"><i class="fa fa-check"></i><b>6.7.3</b> Selecting variables by column</a></li>
<li class="chapter" data-level="6.7.4" data-path="data2.html"><a href="data2.html#pipes"><i class="fa fa-check"></i><b>6.7.4</b> Pipes</a></li>
<li class="chapter" data-level="6.7.5" data-path="data2.html"><a href="data2.html#arranging-data-by-row"><i class="fa fa-check"></i><b>6.7.5</b> Arranging Data by Row</a></li>
<li class="chapter" data-level="6.7.6" data-path="data2.html"><a href="data2.html#renaming-variables"><i class="fa fa-check"></i><b>6.7.6</b> Renaming Variables</a></li>
<li class="chapter" data-level="6.7.7" data-path="data2.html"><a href="data2.html#data-summaries-and-grouping"><i class="fa fa-check"></i><b>6.7.7</b> Data Summaries and Grouping</a></li>
<li class="chapter" data-level="6.7.8" data-path="data2.html"><a href="data2.html#creating-new-variables"><i class="fa fa-check"></i><b>6.7.8</b> Creating New Variables</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="data2.html"><a href="data2.html#practice-exercises-3"><i class="fa fa-check"></i><b>6.8</b> Practice Exercises</a></li>
<li class="chapter" data-level="6.9" data-path="data2.html"><a href="data2.html#homework-3"><i class="fa fa-check"></i><b>6.9</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="functions-and-programming.html"><a href="functions-and-programming.html"><i class="fa fa-check"></i><b>7</b> Functions and Programming</a><ul>
<li class="chapter" data-level="7.1" data-path="functions-and-programming.html"><a href="functions-and-programming.html#r-functions"><i class="fa fa-check"></i><b>7.1</b> R Functions</a><ul>
<li class="chapter" data-level="7.1.1" data-path="functions-and-programming.html"><a href="functions-and-programming.html#creating-functions"><i class="fa fa-check"></i><b>7.1.1</b> Creating Functions</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="functions-and-programming.html"><a href="functions-and-programming.html#programming-conditional-statements"><i class="fa fa-check"></i><b>7.2</b> Programming: Conditional Statements</a><ul>
<li class="chapter" data-level="7.2.1" data-path="functions-and-programming.html"><a href="functions-and-programming.html#comparison-and-logical-operators"><i class="fa fa-check"></i><b>7.2.1</b> Comparison and Logical Operators</a></li>
<li class="chapter" data-level="7.2.2" data-path="functions-and-programming.html"><a href="functions-and-programming.html#if-else-statements"><i class="fa fa-check"></i><b>7.2.2</b> If else statements</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="functions-and-programming.html"><a href="functions-and-programming.html#arith"><i class="fa fa-check"></i><b>7.3</b> Computer Arithmetic</a></li>
<li class="chapter" data-level="7.4" data-path="functions-and-programming.html"><a href="functions-and-programming.html#loops"><i class="fa fa-check"></i><b>7.4</b> Loops</a><ul>
<li class="chapter" data-level="7.4.1" data-path="functions-and-programming.html"><a href="functions-and-programming.html#a-repeat-loop"><i class="fa fa-check"></i><b>7.4.1</b> A Repeat Loop</a></li>
<li class="chapter" data-level="7.4.2" data-path="functions-and-programming.html"><a href="functions-and-programming.html#a-while-loop"><i class="fa fa-check"></i><b>7.4.2</b> A While Loop</a></li>
<li class="chapter" data-level="7.4.3" data-path="functions-and-programming.html"><a href="functions-and-programming.html#a-for-loop"><i class="fa fa-check"></i><b>7.4.3</b> A For Loop</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="functions-and-programming.html"><a href="functions-and-programming.html#efficiency-considerations"><i class="fa fa-check"></i><b>7.5</b> Efficiency Considerations</a><ul>
<li class="chapter" data-level="7.5.1" data-path="functions-and-programming.html"><a href="functions-and-programming.html#growing-objects"><i class="fa fa-check"></i><b>7.5.1</b> Growing Objects</a></li>
<li class="chapter" data-level="7.5.2" data-path="functions-and-programming.html"><a href="functions-and-programming.html#vectorization"><i class="fa fa-check"></i><b>7.5.2</b> Vectorization</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="functions-and-programming.html"><a href="functions-and-programming.html#more-on-functions"><i class="fa fa-check"></i><b>7.6</b> More on Functions</a></li>
<li class="chapter" data-level="7.7" data-path="functions-and-programming.html"><a href="functions-and-programming.html#calling-functions"><i class="fa fa-check"></i><b>7.7</b> Calling Functions</a><ul>
<li class="chapter" data-level="7.7.1" data-path="functions-and-programming.html"><a href="functions-and-programming.html#the-...-argument"><i class="fa fa-check"></i><b>7.7.1</b> The <code>...</code> argument</a></li>
<li class="chapter" data-level="7.7.2" data-path="functions-and-programming.html"><a href="functions-and-programming.html#lazy-evaluation"><i class="fa fa-check"></i><b>7.7.2</b> Lazy Evaluation</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="functions-and-programming.html"><a href="functions-and-programming.html#homework-4"><i class="fa fa-check"></i><b>7.8</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="sp.html"><a href="sp.html"><i class="fa fa-check"></i><b>8</b> Spatial Data Visualization and Analysis</a><ul>
<li class="chapter" data-level="8.1" data-path="sp.html"><a href="sp.html#overview"><i class="fa fa-check"></i><b>8.1</b> Overview</a><ul>
<li class="chapter" data-level="8.1.1" data-path="sp.html"><a href="sp.html#some-spatial-data-packages"><i class="fa fa-check"></i><b>8.1.1</b> Some Spatial Data Packages</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="sp.html"><a href="sp.html#motivating-data"><i class="fa fa-check"></i><b>8.2</b> Motivating Data</a></li>
<li class="chapter" data-level="8.3" data-path="sp.html"><a href="sp.html#reading-spatial-data-into-r"><i class="fa fa-check"></i><b>8.3</b> Reading Spatial Data into R</a></li>
<li class="chapter" data-level="8.4" data-path="sp.html"><a href="sp.html#coordinate-reference-systems"><i class="fa fa-check"></i><b>8.4</b> Coordinate Reference Systems</a></li>
<li class="chapter" data-level="8.5" data-path="sp.html"><a href="sp.html#ggmap"><i class="fa fa-check"></i><b>8.5</b> Illustration using <code>ggmap</code></a></li>
<li class="chapter" data-level="8.6" data-path="sp.html"><a href="sp.html#illustration-using-leaflet"><i class="fa fa-check"></i><b>8.6</b> Illustration using <code>leaflet</code></a></li>
<li class="chapter" data-level="8.7" data-path="sp.html"><a href="sp.html#subsetting-spatial-data"><i class="fa fa-check"></i><b>8.7</b> Subsetting Spatial Data</a><ul>
<li class="chapter" data-level="8.7.1" data-path="sp.html"><a href="sp.html#fetching-and-cropping-data-using-raster"><i class="fa fa-check"></i><b>8.7.1</b> Fetching and Cropping Data using <code>raster</code></a></li>
<li class="chapter" data-level="8.7.2" data-path="sp.html"><a href="sp.html#logical-index-and-name-subsetting"><i class="fa fa-check"></i><b>8.7.2</b> Logical, Index, and Name Subsetting</a></li>
<li class="chapter" data-level="8.7.3" data-path="sp.html"><a href="sp.html#spatial-subsetting-and-overlay"><i class="fa fa-check"></i><b>8.7.3</b> Spatial Subsetting and Overlay</a></li>
<li class="chapter" data-level="8.7.4" data-path="sp.html"><a href="sp.html#spatial-aggregation"><i class="fa fa-check"></i><b>8.7.4</b> Spatial Aggregation</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="sp.html"><a href="sp.html#where-to-go-from-here"><i class="fa fa-check"></i><b>8.8</b> Where to go from here</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Programming for Data Sciences</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="structures" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Data Structures</h1>
<p>A data structure is a format for organizing and storing data. The structure is designed so that data can be accessed and worked with in specific ways. Statistical software and programming languages have methods (or functions) designed to operate on different kinds of data structures.</p>
<p>This chapter’s focus is on data structures. To help initial understanding, the data in this chapter will be relatively modest in size and complexity. The ideas and methods, however, generalize to larger and more complex data sets.</p>
<p>The base data structures in R are vectors, matrices, arrays, data frames, and lists. The first three, vectors, matrices, and arrays, require all elements to be of the same type or homogeneous, e.g., all numeric or all character. Data frames and lists allow elements to be of different types or heterogeneous, e.g., some elements of a data frame may be numeric while other elements may be character. These base structures can also be organized by their dimensionality, i.e., 1-dimensional, 2-dimensional, or N-dimensional, as shown in Table <a href="#tab:dataStructures"><strong>??</strong></a>.</p>
<p>R has no scalar types, i.e., 0-dimensional. Individual numbers or strings are actually vectors of length one.</p>
<p>An efficient way to understand what comprises a given object is to use the <code>str()</code> function. <code>str()</code> is short for structure and prints a compact, human-readable description of any R data structure. For example, in the code below, we prove to ourselves that what we might think of as a scalar value is actually a vector of length one.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>a &lt;-<span class="st"> </span><span class="dv">1</span>
<span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(a)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">is.vector</span>(a)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(a)</code></pre>
<p>Here we assigned <code>a</code> the scalar value one. The <code>str(a)</code> prints <code>num 1</code>, which says <code>a</code> is numeric of length one. Then just to be sure we used the function <code>is.vector()</code> to test if <code>a</code> is in fact a vector. Then, just for fun, we asked the length of <code>a</code>, which again returns one. There are a set of similar logical tests for the other base data structures, e.g., <code>is.matrix()</code>, <code>is.array()</code>, <code>is.data.frame()</code>, and <code>is.list()</code>. These will all come in handy as we encounter different R objects.</p>
<div id="vector" class="section level2">
<h2><span class="header-section-number">4.1</span> Vectors</h2>
<p>Think of a vector<a href="#fn15" class="footnote-ref" id="fnref15"><sup>15</sup></a> as a structure to represent one variable in a data set. For example a vector might hold the weights, in pounds, of 7 people in a data set. Or another vector might hold the genders of those 7 people. The <code>c()</code> function in R is useful for creating (small) vectors and for modifying existing vectors. Think of <code>c</code> as standing for “combine”.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>weight &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">123</span>, <span class="dv">157</span>, <span class="dv">205</span>, <span class="dv">199</span>, <span class="dv">223</span>, <span class="dv">140</span>, <span class="dv">105</span>)
<span class="op">&gt;</span><span class="st"> </span>weight
<span class="op">&gt;</span><span class="st"> </span>gender &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;female&quot;</span>, <span class="st">&quot;female&quot;</span>, <span class="st">&quot;male&quot;</span>, <span class="st">&quot;female&quot;</span>, <span class="st">&quot;male&quot;</span>, 
<span class="op">+</span><span class="st">             &quot;male&quot;</span>, <span class="st">&quot;female&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span>gender</code></pre>
<p>Notice that elements of a vector are separated by commas when using the <code>c()</code> function to create a vector. Also notice that character values are placed inside quotation marks.</p>
<p>The <code>c()</code> function also can be used to add to an existing vector. For example, if an eighth male person was included in the data set, and his weight was 194 pounds, the existing vectors could be modified as follows.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>weight &lt;-<span class="st"> </span><span class="kw">c</span>(weight, <span class="dv">194</span>)
<span class="op">&gt;</span><span class="st"> </span>gender &lt;-<span class="st"> </span><span class="kw">c</span>(gender, <span class="st">&quot;male&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span>weight
<span class="op">&gt;</span><span class="st"> </span>gender</code></pre>
<div id="types-conversion-coercion" class="section level3">
<h3><span class="header-section-number">4.1.1</span> Types, Conversion, Coercion</h3>
<p>Clearly it is important to distinguish between different types of vectors. For example, it makes sense to ask R to calculate the mean of the weights stored in <code>weight</code>, but does not make sense to ask R to compute the mean of the genders stored in <code>gender</code>. Vectors in R may have one of six different “types”: character, double, integer, logical, complex, and raw. Only the first four of these will be of interest below, and the distinction between double and integer will not be of great import. To illustrate logical vectors, imagine that each of the eight people in the data set was asked whether he or she was taking blood pressure medication, and the responses were coded as <code>TRUE</code> if the person answered yes, and <code>FALSE</code> if the person answered no.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(weight)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(gender)
<span class="op">&gt;</span><span class="st"> </span>bp &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>)
<span class="op">&gt;</span><span class="st"> </span>bp
<span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(bp)</code></pre>
<p>It may be surprising to see that the variable <code>weight</code> is of <code>double</code> type, even though its values all are integers. By default R creates a double type vector when numeric values are given via the <code>+c()</code> function.</p>
<p>When it makes sense, it is possible to convert vectors to a different type. Consider the following examples.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>weight.int &lt;-<span class="st"> </span><span class="kw">as.integer</span>(weight)
<span class="op">&gt;</span><span class="st"> </span>weight.int
<span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(weight.int)
<span class="op">&gt;</span><span class="st"> </span>weight.char &lt;-<span class="st"> </span><span class="kw">as.character</span>(weight)
<span class="op">&gt;</span><span class="st"> </span>weight.char
<span class="op">&gt;</span><span class="st"> </span>bp.double &lt;-<span class="st"> </span><span class="kw">as.double</span>(bp)
<span class="op">&gt;</span><span class="st"> </span>bp.double
<span class="op">&gt;</span><span class="st"> </span>gender.oops &lt;-<span class="st"> </span><span class="kw">as.double</span>(gender)
<span class="op">&gt;</span><span class="st"> </span>gender.oops
<span class="op">&gt;</span><span class="st"> </span><span class="kw">sum</span>(bp)</code></pre>
<p>The integer version of <code>weight</code> doesn’t look any different, but it is stored differently, which can be important both for computational efficiency and for interfacing with other languages such as <code>C++</code>. As noted above, however, we will not worry about the distinction between integer and double types. Converting <code>weight</code> to character goes as expected: The character representations of the numbers replace the numbers themselves. Converting the logical vector <code>bp</code> to double is pretty straightforward too: <code>FALSE</code> is converted to zero, and <code>TRUE</code> is converted to one. Now think about converting the character vector <code>gender</code> to a numeric double vector. It’s not at all clear how to represent “female” and “male” as numbers. In fact in this case what R does is to create a character vector, but with each element set to <code>NA</code>, which is the representation of missing data.<a href="#fn16" class="footnote-ref" id="fnref16"><sup>16</sup></a> Finally consider the code <code>sum(bp)</code>. Now <code>bp</code> is a logical vector, but when R sees that we are asking to sum this logical vector, it automatically converts it to a numerical vector and then adds the zeros and ones representing <code>FALSE</code> and <code>TRUE</code>.</p>
<p>R also has functions to test whether a vector is of a particular type.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">is.double</span>(weight)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">is.character</span>(weight)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">is.integer</span>(weight.int)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">is.logical</span>(bp)</code></pre>
<div id="coercion" class="section level4">
<h4><span class="header-section-number">4.1.1.1</span> Coercion</h4>
<p>Consider the following examples.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>xx &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="ot">TRUE</span>)
<span class="op">&gt;</span><span class="st"> </span>xx
<span class="op">&gt;</span><span class="st"> </span>yy &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="st">&quot;dog&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span>yy
<span class="op">&gt;</span><span class="st"> </span>zz &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="st">&quot;cat&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span>zz
<span class="op">&gt;</span><span class="st"> </span>weight <span class="op">+</span><span class="st"> </span>bp</code></pre>
<p>Vectors in R can only contain elements of one type. If more than one type is included in a <code>c()</code> function, R silently <em>coerces</em> the vector to be of one type. The examples illustrate the hierarchy—if any element is a character, then the whole vector is character. If some elements are numeric (either integer or double) and other elements are logical, the whole vector is numeric. Note what happened when R was asked to add the numeric vector <code>weight</code> to the logical vector <code>bp</code>. The logical vector was silently coerced to be numeric, so that FALSE became zero and TRUE became one, and then the two numeric vectors were added.</p>
</div>
</div>
<div id="accessing-specific-elements-of-vectors" class="section level3">
<h3><span class="header-section-number">4.1.2</span> Accessing Specific Elements of Vectors</h3>
<p>To access and possibly change specific elements of vectors, refer to the position of the element in square brackets. For example, <code>weight[4]</code> refers to the fourth element of the vector <code>weight</code>. Note that R starts the numbering of elements at 1, i.e., the first element of a vector <code>x</code> is <code>x[1]</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>weight
<span class="op">&gt;</span><span class="st"> </span>weight[<span class="dv">5</span>]
<span class="op">&gt;</span><span class="st"> </span>weight[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]
<span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(weight)
<span class="op">&gt;</span><span class="st"> </span>weight[<span class="kw">length</span>(weight)]
<span class="op">&gt;</span><span class="st"> </span>weight[]
<span class="op">&gt;</span><span class="st"> </span>weight[<span class="dv">3</span>] &lt;-<span class="st"> </span><span class="dv">202</span>
<span class="op">&gt;</span><span class="st"> </span>weight</code></pre>
<p>Note that including nothing in the square brackets results in the whole vector being returned.</p>
<p>Negative numbers in the square brackets tell R to omit the corresponding value. And a zero as a subscript returns nothing (more precisely, it returns a length zero vector of the appropriate type).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>weight[<span class="op">-</span><span class="dv">3</span>]
<span class="op">&gt;</span><span class="st"> </span>weight[<span class="op">-</span><span class="kw">length</span>(weight)]
<span class="op">&gt;</span><span class="st"> </span>lessWeight &lt;-<span class="st"> </span>weight[<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)]
<span class="op">&gt;</span><span class="st"> </span>lessWeight
<span class="op">&gt;</span><span class="st"> </span>weight[<span class="dv">0</span>]
<span class="op">&gt;</span><span class="st"> </span>weight[<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">1</span>)]
<span class="op">&gt;</span><span class="st"> </span>weight[<span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>, <span class="dv">2</span>)]</code></pre>
<p>Note that mixing zero and other nonzero subscripts is allowed, but mixing negative and positive subscripts is not allowed.</p>
<p>What about the (usual) case where we don’t know the positions of the elements we want? For example possibly we want the weights of all females in the data. Later we will learn how to subset using logical indices, which is a very powerful way to access desired elements of a vector.</p>
</div>
</div>
<div id="factors" class="section level2">
<h2><span class="header-section-number">4.2</span> Factors</h2>
<p>Categorical variables such as <code>gender</code> can be represented as character vectors. In many cases this simple representation is sufficient. Consider, however, two other categorical variables, one representing age via categories <code>youth</code>, <code>young adult</code>, <code>middle age</code>, <code>senior</code>, and another representing income via categories <code>lower</code>, <code>middle</code>, and <code>upper</code>. Suppose that for the small health data set, all the people are either middle aged or senior citizens. If we just represented the variable via a character vector, there would be no way to know that there are two other categories, representing youth and senior citizens, which happen not to be present in the data set. And for the income variable, the character vector representation does not explicitly indicate that there is an ordering of the levels.</p>
<p>Factors in R provide a more sophisticated way to represent categorical variables. Factors explicitly contain all possible levels, and allow ordering of levels.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>age &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;middle age&quot;</span>, <span class="st">&quot;senior&quot;</span>, <span class="st">&quot;middle age&quot;</span>, <span class="st">&quot;senior&quot;</span>, 
<span class="op">+</span><span class="st">          &quot;senior&quot;</span>, <span class="st">&quot;senior&quot;</span>, <span class="st">&quot;senior&quot;</span>, <span class="st">&quot;middle age&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span>income &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;lower&quot;</span>, <span class="st">&quot;lower&quot;</span>, <span class="st">&quot;upper&quot;</span>, <span class="st">&quot;middle&quot;</span>, <span class="st">&quot;upper&quot;</span>, 
<span class="op">+</span><span class="st">             &quot;lower&quot;</span>, <span class="st">&quot;lower&quot;</span>, <span class="st">&quot;middle&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span>age
<span class="op">&gt;</span><span class="st"> </span>income
<span class="op">&gt;</span><span class="st"> </span>age &lt;-<span class="st"> </span><span class="kw">factor</span>(age, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;youth&quot;</span>, <span class="st">&quot;young adult&quot;</span>, <span class="st">&quot;middle age&quot;</span>, 
<span class="op">+</span><span class="st">                             &quot;senior&quot;</span>))
<span class="op">&gt;</span><span class="st"> </span>age
<span class="op">&gt;</span><span class="st"> </span>income &lt;-<span class="st"> </span><span class="kw">factor</span>(income, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;lower&quot;</span>, <span class="st">&quot;middle&quot;</span>, <span class="st">&quot;upper&quot;</span>), 
<span class="op">+</span><span class="st">                  </span><span class="dt">ordered =</span> <span class="ot">TRUE</span>)
<span class="op">&gt;</span><span class="st"> </span>income</code></pre>
<p>In the factor version of <code>age</code> the levels are explicitly listed, so it is clear that the two included levels are not all the possible levels. And in the factor version of income, the ordering is explicit.</p>
<p>In many cases the character vector representation of a categorical variable is sufficient and easier to work with. In this book, factors will not be used extensively. It is important to note that R often by default creates a factor when character data are read in, and sometimes it is necessary to use the argument <code>stringsAsFactors = FALSE</code> to explicitly tell R not to do this. This is shown later in the chapter when data frames are introduced.</p>
</div>
<div id="names-of-objects-in-r" class="section level2">
<h2><span class="header-section-number">4.3</span> Names of Objects in R</h2>
<p>There are few hard and fast restrictions on the names of objects (such as vectors) in R. In addition to these restrictions, there are certain good practices, and many things to avoid as well.</p>
<p>From the help page for <code>make.names</code> in R, the name of an R object is “syntactically valid” if the name “consists of letters, numbers and the dot or underline characters and starts with a letter or the dot not followed by a number” and is not one of the “reserved words” in R such as <code>if</code>, <code>TRUE</code>, <code>function</code>, etc. For example, <code>c45t.le_dog</code> and <code>.ty56</code> are both syntactically valid (although not very good names) while <code>4cats</code> and <code>log#@gopher</code> are not.</p>
<p>A few important comments about naming objects follow:</p>
<ol style="list-style-type: decimal">
<li>It is important to be aware that names of objects in R are case-sensitive, so <code>weight</code> and <code>Weight</code> do not refer to the same object.</li>
</ol>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>weight
<span class="op">&gt;</span><span class="st"> </span>Weight</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>It is unwise to create an object with the same name as a built in R object such as the function <code>c</code> or the function <code>mean</code>. In earlier versions of R this could be somewhat disastrous, but even in current versions, it is definitely not a good idea!</li>
<li>As much as possible, choose names that are informative. When creating a variable you may initially remember that <code>x</code> contains heights and <code>y</code> contains genders, but after a few hours, a few days, or a few weeks, you probably will forget this. Better options are <code>Height</code> and <code>Gender</code>.</li>
<li>As much as possible, be consistent in how you name objects. In particular, decide how to separate multi-word names. Some options include:
<ul>
<li>Using case to separate: <code>BloodPressure</code> or <code>bloodPressure</code> for example</li>
<li>Using underscores to separate: <code>blood_pressure</code> for example</li>
<li>Using a period to separate: <code>blood.pressure</code> for example</li>
</ul></li>
</ol>
</div>
<div id="missing-data-infinity-etc." class="section level2">
<h2><span class="header-section-number">4.4</span> Missing Data, Infinity, etc.</h2>
<p>Most real-world data sets have variables where some observations are missing. In a longitudinal study participants may drop out. In a survey, participants may decide not to respond to certain questions. Statistical software should be able to represent missing data and to analyze data sets in which some data are missing.</p>
<p>In R, the value <code>NA</code> is used for a missing data value. Since missing values may occur in numeric, character, and other types of data, and since R requires that a vector contain only elements of one type, there are different types of <code>NA</code> values. Usually R determines the appropriate type of <code>NA</code> value automatically. It is worth noting that the default type for <code>NA</code> is logical, and that <code>NA</code> is NOT the same as the character string <code>&quot;NA&quot;</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>missingCharacter &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;dog&quot;</span>, <span class="st">&quot;cat&quot;</span>, <span class="ot">NA</span>, <span class="st">&quot;pig&quot;</span>, <span class="ot">NA</span>, <span class="st">&quot;horse&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span>missingCharacter
<span class="op">&gt;</span><span class="st"> </span><span class="kw">is.na</span>(missingCharacter)
<span class="op">&gt;</span><span class="st"> </span>missingCharacter &lt;-<span class="st"> </span><span class="kw">c</span>(missingCharacter, <span class="st">&quot;NA&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span>missingCharacter
<span class="op">&gt;</span><span class="st"> </span><span class="kw">is.na</span>(missingCharacter)
<span class="op">&gt;</span><span class="st"> </span>allMissing &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(allMissing)</code></pre>
<p>How should missing data be treated in computations, such as finding the mean or standard deviation of a variable? One possibility is to return <code>NA</code>. Another is to remove the missing value(s) and then perform the computation.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="ot">NA</span>, <span class="dv">5</span>))
<span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="ot">NA</span>, <span class="dv">5</span>), <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre>
<p>As this example shows, the default behavior for the <code>mean()</code> function is to return <code>NA</code>. If removal of the missing values and then computing the mean is desired, the argument <code>na.rm</code> is set to <code>TRUE</code>. Different R functions have different default behaviors, and there are other possible actions. Consulting the help for a function provides the details.</p>
<div id="infinity-and-nan" class="section level3">
<h3><span class="header-section-number">4.4.1</span> Infinity and NaN</h3>
<p>What happens if R code requests division by zero, or results in a number that is too large to be represented? Here are some examples.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>x &lt;-<span class="st"> </span><span class="dv">0</span><span class="op">:</span><span class="dv">4</span>
<span class="op">&gt;</span><span class="st"> </span>x
<span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span><span class="op">/</span>x
<span class="op">&gt;</span><span class="st"> </span>x<span class="op">/</span>x
<span class="op">&gt;</span><span class="st"> </span>y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">1000</span>, <span class="dv">10000</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span><span class="op">^</span>y</code></pre>
<p><code>Inf</code> and <code>-Inf</code> represent infinity and negative infinity (and numbers which are too large in magnitude to be represented as floating point numbers). <code>NaN</code> represents the result of a calculation where the result is undefined, such as dividing zero by zero. All of these are common to a variety of programming languages, including R.</p>
</div>
</div>
<div id="dataFrames" class="section level2">
<h2><span class="header-section-number">4.5</span> Data Frames</h2>
<p>Commonly, data is rectangular in form, with variables as columns and cases as rows. Continuing with the (contrived) data on weight, gender, and blood pressure medication, each of those variables would be a column of the data set, and each person’s measurements would be a row. In R, such data are represented as a <em>data frame</em>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>healthData &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">Weight =</span> weight, <span class="dt">Gender=</span>gender, <span class="dt">bp.meds =</span> bp,
<span class="op">+</span><span class="st">                          </span><span class="dt">stringsAsFactors=</span><span class="ot">FALSE</span>)
<span class="op">&gt;</span><span class="st"> </span>healthData
<span class="op">&gt;</span><span class="st"> </span><span class="kw">names</span>(healthData)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">colnames</span>(healthData)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">names</span>(healthData) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Wt&quot;</span>, <span class="st">&quot;Gdr&quot;</span>, <span class="st">&quot;bp&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span>healthData
<span class="op">&gt;</span><span class="st"> </span><span class="kw">rownames</span>(healthData)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">names</span>(healthData) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Weight&quot;</span>, <span class="st">&quot;Gender&quot;</span>, <span class="st">&quot;bp.meds&quot;</span>)</code></pre>
<p>The <code>data.frame</code> function can be used to create a data frame (although it’s more common to read a data frame into R from an external file, something that will be introduced later). The names of the variables in the data frame are given as arguments, as are the vectors of data that make up the variable’s values. The argument <code>stringsAsFactors=FALSE</code> asks R not to convert character vectors into factors, which R does by default, to the dismay of many users. Names of the columns (variables) can be extracted and set via either <code>names</code> or <code>colnames</code>. In the example, the variable names are changed to <code>Wt, Gdr, bp</code> and then changed back to the original <code>Weight, Gender, bp.meds</code> in this way. Rows can be named also. In this case since specific row names were not provided, the default row names of <code>&quot;1&quot;, &quot;2&quot;</code> etc. are used.</p>
<p>In the next example a built-in dataset called <code>mtcars</code> is made available by the <code>data</code> function, and then the first and last six rows are displayed using <code>head</code> and <code>tail</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">data</span>(mtcars)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(mtcars)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">tail</span>(mtcars)</code></pre>
<p>Note that the <code>mtcars</code> data frame does have non-default row names which give the make and model of the cars.</p>
<div id="accessing-specific-elements-of-data-frames" class="section level3">
<h3><span class="header-section-number">4.5.1</span> Accessing Specific Elements of Data Frames</h3>
<p>Data frames are two-dimensional, so to access a specific element (or elements) we need to specify both the row and column.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>mtcars[<span class="dv">1</span>, <span class="dv">4</span>]
<span class="op">&gt;</span><span class="st"> </span>mtcars[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">3</span>]
<span class="op">&gt;</span><span class="st"> </span>mtcars[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">2</span><span class="op">:</span><span class="dv">3</span>]
<span class="op">&gt;</span><span class="st"> </span>mtcars[, <span class="dv">1</span>]</code></pre>
<p>Note that <code>mtcars[,1]</code> returns ALL elements in the first column. This agrees with the behavior for vectors, where leaving a subscript out of the square brackets tells R to return all values. In this case we are telling R to return all rows, and the first column.</p>
<p>For a data frame there is another way to access specific columns, using the <code>$</code> notation.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>mtcars<span class="op">$</span>mpg
<span class="op">&gt;</span><span class="st"> </span>mtcars<span class="op">$</span>cyl
<span class="op">&gt;</span><span class="st"> </span>mpg
<span class="op">&gt;</span><span class="st"> </span>cyl
<span class="op">&gt;</span><span class="st"> </span>weight</code></pre>
<p>Notice that typing the variable name, such as <code>mpg</code>, without the name of the data frame (and a dollar sign) as a prefix, does not work. This is sensible. There may be several data frames that have variables named <code>mpg</code>, and just typing <code>mpg</code> doesn’t provide enough information to know which is desired. But if there is a vector named <code>mpg</code> that is created outside a data frame, it will be retrieved when <code>mpg</code> is typed, which is why typing <code>weight</code> does work, since <code>weight</code> was created outside of a data frame, although ultimately it was incorporated into the <code>healthData</code> data frame.</p>
</div>
</div>
<div id="lists" class="section level2">
<h2><span class="header-section-number">4.6</span> Lists</h2>
<p>The third main data structure we will work with is a list. Technically a list is a vector, but one in which elements can be of different types. For example a list may have one element that is a vector, one element that is a data frame, and another element that is a function. Consider designing a function that fits a simple linear regression model to two quantitative variables. We might want that function to compute and return several things such as</p>
<ul>
<li>The fitted slope and intercept (a numeric vector with two components)</li>
<li>The residuals (a numeric vector with <span class="math inline">\(n\)</span> components, where <span class="math inline">\(n\)</span> is the number of data points)</li>
<li>Fitted values for the data (a numeric vector with <span class="math inline">\(n\)</span> components, where <span class="math inline">\(n\)</span> is the number of data points)</li>
<li>The names of the dependent and independent variables (a character vector with two components)</li>
</ul>
<p>In fact R has a function, <code>lm</code>, which does this (and much more).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>mpgHpLinMod &lt;-<span class="st"> </span><span class="kw">lm</span>(mpg <span class="op">~</span><span class="st"> </span>hp, <span class="dt">data =</span> mtcars)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">mode</span>(mpgHpLinMod)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">names</span>(mpgHpLinMod)
<span class="op">&gt;</span><span class="st"> </span>mpgHpLinMod<span class="op">$</span>coefficients
<span class="op">&gt;</span><span class="st"> </span>mpgHpLinMod<span class="op">$</span>residuals</code></pre>
<p>The <code>lm</code> function returns a list (which in the code above has been assigned to the object <code>mpgHpLinMod</code>).<a href="#fn17" class="footnote-ref" id="fnref17"><sup>17</sup></a> One component of the list is the length <code>length(mpgHpLinMod$coefficients)</code> vector of coefficients, while another component is the length <code>length(mpgHpLinMod$residuals)</code> vector of residuals. The code also illustrates that named components of a list can be accessed using the dollar sign notation, as with data frames.</p>
<p>The <code>list</code> function is used to create lists.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>temporaryList &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">first=</span>weight, <span class="dt">second=</span>healthData,
<span class="op">+</span><span class="st">                       </span><span class="dt">pickle=</span><span class="kw">list</span>(<span class="dt">a =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">b=</span>healthData))
<span class="op">&gt;</span><span class="st"> </span>temporaryList</code></pre>
<p>Here, for illustration, I assembled a list to hold some of the R data structures we have been working with in this chapter. The first list element, named <code>first</code>, holds the <code>weight</code> vector we created in Section <a href="structures.html#vector">4.1</a>, the second list element, named <code>second</code>, holds the <code>healthData</code> data frame, and the third list element, named <code>pickle</code>, holds a list with elements named <code>a</code> and <code>b</code> that hold a vector of values 1 through 10 and another copy of the <code>healthData</code> data frame, respectively. As this example shows, a list can contain another list.</p>
<div id="accessing-specific-elements-of-lists" class="section level3">
<h3><span class="header-section-number">4.6.1</span> Accessing Specific Elements of Lists</h3>
<p>We already have seen the dollar sign notation works for lists. In addition, the square bracket subsetting notation can be used. There is an added, somewhat subtle wrinkle—using either single or double square brackets.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>temporaryList<span class="op">$</span>first
<span class="op">&gt;</span><span class="st"> </span><span class="kw">mode</span>(temporaryList<span class="op">$</span>first)
<span class="op">&gt;</span><span class="st"> </span>temporaryList[[<span class="dv">1</span>]]
<span class="op">&gt;</span><span class="st"> </span><span class="kw">mode</span>(temporaryList[[<span class="dv">1</span>]])
<span class="op">&gt;</span><span class="st"> </span>temporaryList[<span class="dv">1</span>]
<span class="op">&gt;</span><span class="st"> </span><span class="kw">mode</span>(temporaryList[<span class="dv">1</span>])</code></pre>
<p>Note the dollar sign and double bracket notation return a numeric vector, while the single bracket notation returns a list. Notice also the difference in results below.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>temporaryList[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)]
<span class="op">&gt;</span><span class="st"> </span>temporaryList[[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)]]</code></pre>
<p>The single bracket form returns the first and second elements of the list, while the double bracket form returns the second element in the first element of the list. Generally, do not put a vector of indices or names in a double bracket, you will likely get unexpected results. See, for example, the results below.<a href="#fn18" class="footnote-ref" id="fnref18"><sup>18</sup></a></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>temporaryList[[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)]]</code></pre>
<p>So, in summary, there are two main differences between using the single bracket <code>[]</code> and double bracket <code>[[]]</code>. First, the single bracket will return a list that holds the object(s) held at the given indices or names placed in the bracket, whereas the double brackets will return the actual object held at the index or name placed in the innermost bracket. Put differently, a single bracket can be used to access a range of list elements and will return a list, and a double bracket can only access a single element in the list and will return the object held at the index.</p>
</div>
</div>
<div id="subsetting" class="section level2">
<h2><span class="header-section-number">4.7</span> Subsetting with Logical Vectors</h2>
<p>Consider the <code>healthData</code> data frame. How can we access only those weights which are more than 200? How can we access the genders of those whose weights are more than 200? How can we compute the mean weight of males and the mean weight of females? Or consider the <code>mtcars</code> data frame. How can we obtain the miles per gallon for all six cylinder cars? Both of these data sets are small enough that it would not be too onerous to extract the values by hand. But for larger or more complex data sets, this would be very difficult or impossible to do in a reasonable amount of time, and would likely result in errors.</p>
<p>R has a powerful method for solving these sorts of problems using a variant of the subsetting methods that we already have learned. When given a logical vector in square brackets, R will return the values corresponding to <code>TRUE</code>.
To begin, focus on the <code>weight</code> and <code>gender</code> vectors created in Section <a href="structures.html#vector">4.1</a>.</p>
<p>The R code <code>weight &gt; 200</code> returns a <code>TRUE</code> for each value of <code>weight</code> which is more than 200, and a <code>FALSE</code> for each value of <code>weight</code> which is less than or equal to 200. Similarly <code>gender == &quot;female&quot;</code> returns <code>TRUE</code> or <code>FALSE</code> depending on whether an element of <code>gender</code> is equal to <code>female</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>weight
<span class="op">&gt;</span><span class="st"> </span>weight <span class="op">&gt;</span><span class="st"> </span><span class="dv">200</span>
<span class="op">&gt;</span><span class="st"> </span>gender[weight <span class="op">&gt;</span><span class="st"> </span><span class="dv">200</span>]
<span class="op">&gt;</span><span class="st"> </span>weight[weight <span class="op">&gt;</span><span class="st"> </span><span class="dv">200</span>]
<span class="op">&gt;</span><span class="st"> </span>gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>
<span class="op">&gt;</span><span class="st"> </span>weight[gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>]</code></pre>
<p>Consider the lines of R code one by one.</p>
<ul>
<li><code>weight</code> instructs R to display the values in the vector <code>weight</code>.</li>
<li><code>weight &gt; 200</code> instructs R to check whether each value in <code>weight</code> is greater than 200, and to return <code>TRUE</code> if so, and <code>FALSE</code> otherwise.
+The next line, <code>gender[weight &gt; 200]</code>, does two things. First, inside the square brackets, it does the same thing as the second line, namely, returning <code>TRUE</code> or <code>FALSE</code> depending on whether a value of <code>weight</code> is or is not greater than 200. Second, each element of <code>gender</code> is matched with the corresponding <code>TRUE</code> or <code>FALSE</code> value, and is returned if and only if the corresponding value is <code>TRUE</code>. For example the first value of <code>gender</code> is <code>gender[1]</code>. Since the first <code>TRUE</code> or <code>FALSE</code> value is <code>FALSE</code>, the first value of <code>gender</code> is not returned. Only the third and fifth values of <code>gender</code>, both of which happen to be <code>male</code>, are returned. Briefly, this line returns the genders of those people whose weight is over 200 pounds.</li>
<li>The fourth line of code, <code>weight[weight &gt; 200]</code>, again begins by returning <code>TRUE</code> or <code>FALSE</code> depending on whether elements of <code>weight</code> are larger than 200. Then those elements of <code>weight</code> corresponding to <code>TRUE</code> values, are returned. So this line returns the weights of those people whose weights are more than 200 pounds.</li>
<li>The fifth line returns <code>TRUE</code> or <code>FALSE</code> depending on whether elements of <code>gender</code> are equal to <code>female</code> or not.</li>
<li>The sixth line returns the weights of those whose gender is <code>female</code>.</li>
</ul>
<p>There are six comparison operators in R, <code>&gt;, &lt;, &gt;=, &lt;=, ==, !=</code>. Note that to test for equality a “double equals sign” is used, while <code>!=</code> tests for inequality.</p>
<div id="modifying-or-creating-objects-via-subsetting" class="section level3">
<h3><span class="header-section-number">4.7.1</span> Modifying or Creating Objects via Subsetting</h3>
<p>The results of subsetting can be assigned to a new (or existing) R object, and subsetting on the left side of an assignment is a common way to modify an existing R object.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>weight
<span class="op">&gt;</span><span class="st"> </span>lightweight &lt;-<span class="st"> </span>weight[weight <span class="op">&lt;</span><span class="st"> </span><span class="dv">200</span>]
<span class="op">&gt;</span><span class="st"> </span>lightweight
<span class="op">&gt;</span><span class="st"> </span>x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span>
<span class="op">&gt;</span><span class="st"> </span>x
<span class="op">&gt;</span><span class="st"> </span>x[x <span class="op">&lt;</span><span class="st"> </span><span class="dv">5</span>] &lt;-<span class="st"> </span><span class="dv">0</span>
<span class="op">&gt;</span><span class="st"> </span>x
<span class="op">&gt;</span><span class="st"> </span>y &lt;-<span class="st"> </span><span class="dv">-3</span><span class="op">:</span><span class="dv">9</span>
<span class="op">&gt;</span><span class="st"> </span>y
<span class="op">&gt;</span><span class="st"> </span>y[y <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> </span><span class="ot">NA</span>
<span class="op">&gt;</span><span class="st"> </span>y
<span class="op">&gt;</span><span class="st"> </span><span class="kw">rm</span>(x)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">rm</span>(y)</code></pre>
</div>
<div id="logical-subsetting-and-data-frames" class="section level3">
<h3><span class="header-section-number">4.7.2</span> Logical Subsetting and Data Frames</h3>
<p>First consider the small and simple <code>healthData</code> data frame.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>healthData
<span class="op">&gt;</span><span class="st"> </span>healthData<span class="op">$</span>Weight[healthData<span class="op">$</span>Gender <span class="op">==</span><span class="st"> &quot;male&quot;</span>]
<span class="op">&gt;</span><span class="st"> </span>healthData[healthData<span class="op">$</span>Gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>, ]
<span class="op">&gt;</span><span class="st"> </span>healthData[healthData<span class="op">$</span>Weight <span class="op">&gt;</span><span class="st"> </span><span class="dv">190</span>, <span class="dv">2</span><span class="op">:</span><span class="dv">3</span>]</code></pre>
<p>The first example is really just subsetting a vector, since the <code>$</code> notation creates vectors. The second two examples return subsets of the whole data frame. Note that the logical vector subsets the rows of the data frame, choosing those rows where the gender is female or the weight is more than 190. Note also that the specification for the columns (after the comma) is left blank in the first case, telling R to return all the columns. In the second case the second and third columns are requested explicitly.</p>
<p>Next consider the much larger and more complex <code>WorldBank</code> data frame. Recall, the <code>str</code> function displays the “structure” of an R object. Here is a look at the structure of several R objects.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(mtcars)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(temporaryList)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(WorldBank)</code></pre>
<p>First we see that <code>mtcars</code> is a data frame which has 32 observations (rows) on each of 11 variables (columns). The names of the variables are given, along with their type (in this case, all numeric), and the first few values of each variable is given.</p>
<p>Second we see that <code>temporaryList</code> is a list with three components. Each of the components is described separately, with the first few values again given.</p>
<p>Third we examine the structure of <code>WorldBank</code>. It is a data frame with 11880 observations on each of 15 variables. Some of these are character variables, some are numeric, and one (<code>year</code>) is integer. Looking at the first few values we see that some variables have missing values.</p>
<p>Consider creating a data frame which only has the observations from one year, say 1971. That’s relatively easy. Just choose rows for which <code>year</code> is equal to 1971.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>WorldBank1971 &lt;-<span class="st"> </span>WorldBank[WorldBank<span class="op">$</span>year <span class="op">==</span><span class="st"> </span><span class="dv">1971</span>, ]
<span class="op">&gt;</span><span class="st"> </span><span class="kw">dim</span>(WorldBank1971)</code></pre>
<p>The <code>dim</code> function returns the dimensions of a data frame, i.e., the number of rows and the number of columns. From <code>dim</code> we see that there are <code>dim(WorldBank1971)[1]</code> cases from 1971.</p>
<p>Next, how can we create a data frame which only contains data from 1971, and also only contains cases for which there are no missing values in the fertility rate variable? R has a built in function <code>is.na</code> which returns <code>TRUE</code> if the observation is missing and returns <code>FALSE</code> otherwise. And <code>!is.na</code> returns the negation, i.e., it returns <code>FALSE</code> if the observation is missing and <code>TRUE</code> if the observation is not missing.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>WorldBank1971<span class="op">$</span>fertility.rate[<span class="dv">1</span><span class="op">:</span><span class="dv">25</span>]
<span class="op">&gt;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(WorldBank1971<span class="op">$</span>fertility.rate[<span class="dv">1</span><span class="op">:</span><span class="dv">25</span>])
<span class="op">&gt;</span><span class="st"> </span>WorldBank1971 &lt;-<span class="st"> </span>WorldBank1971[<span class="op">!</span><span class="kw">is.na</span>(WorldBank1971<span class="op">$</span>fertility.rate), 
<span class="op">+</span><span class="st">   </span>]
<span class="op">&gt;</span><span class="st"> </span><span class="kw">dim</span>(WorldBank1971)</code></pre>
<p>From <code>dim</code> we see that there are <code>dim(WorldBank1971)[1]</code> cases from 1971 with non-missing fertility rate data.</p>
<p>Return attention now to the original <code>WorldBank</code> data frame with data not only from 1971. How can we extract only those cases (rows) which have NO missing data? Consider the following simple example:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>temporaryDataFrame &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">V1 =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="ot">NA</span>),
<span class="op">+</span><span class="st">                                  </span><span class="dt">V2 =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="ot">NA</span>),
<span class="op">+</span><span class="st">                                  </span><span class="dt">V3 =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>))
<span class="op">&gt;</span><span class="st"> </span>temporaryDataFrame
<span class="op">&gt;</span><span class="st"> </span><span class="kw">is.na</span>(temporaryDataFrame)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">rowSums</span>(<span class="kw">is.na</span>(temporaryDataFrame))</code></pre>
<p>First notice that <code>is.na</code> will test each element of a data frame for missingness. Also recall that if R is asked to sum a logical vector, it will first convert the logical vector to numeric and then compute the sum, which effectively counts the number of elements in the logical vector which are <code>TRUE</code>. The <code>rowSums</code> function computes the sum of each row. So <code>rowSums(is.na(temporaryDataFrame))</code> returns a vector with as many elements as there are rows in the data frame. If an element is zero, the corresponding row has no missing values. If an element is greater than zero, the value is the number of variables which are missing in that row. This gives a simple method to return all the cases which have no missing data.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">dim</span>(WorldBank)
<span class="op">&gt;</span><span class="st"> </span>WorldBankComplete &lt;-<span class="st"> </span>WorldBank[<span class="kw">rowSums</span>(<span class="kw">is.na</span>(WorldBank)) <span class="op">==</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span><span class="dv">0</span>, ]
<span class="op">&gt;</span><span class="st"> </span><span class="kw">dim</span>(WorldBankComplete)</code></pre>
<p>Out of the <code>dim(WorldBankComplete)[1]</code> rows in the original data frame, only <code>dim(WorldBankComplete)[1]</code> have no missing observations!</p>
</div>
</div>
<div id="patterned-data" class="section level2">
<h2><span class="header-section-number">4.8</span> Patterned Data</h2>
<p>Sometimes it is useful to generate all the integers from 1 through 20, to generate a sequence of 100 points equally spaced between 0 and 1, etc. The R functions <code>seq()</code> and <code>rep()</code> as well as the “colon operator” <code>:</code> help to generate such sequences.</p>
<p>The colon operator generates a sequence of values with increments of <span class="math inline">\(1\)</span> or <span class="math inline">\(-1\)</span>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span>
<span class="op">&gt;</span><span class="st"> </span><span class="dv">-5</span><span class="op">:</span><span class="dv">3</span>
<span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span><span class="op">:</span><span class="dv">4</span>
<span class="op">&gt;</span><span class="st"> </span>pi<span class="op">:</span><span class="dv">7</span></code></pre>
<p>The <code>seq()</code> function generates either a sequence of pre-specified length or a sequence with pre-specified increments.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">0</span>, <span class="dt">to =</span> <span class="dv">1</span>, <span class="dt">length =</span> <span class="dv">11</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">1</span>, <span class="dt">to =</span> <span class="dv">5</span>, <span class="dt">by =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">3</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">3</span>, <span class="dt">to =</span> <span class="dv">-1</span>, <span class="dt">length =</span> <span class="dv">10</span>)</code></pre>
<p>The <code>rep()</code> function replicates the values in a given vector.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>), <span class="dt">length =</span> <span class="dv">9</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>), <span class="dt">times =</span> <span class="dv">3</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>), <span class="dt">times =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">7</span>))</code></pre>
</div>
<div id="practice-exercises-1" class="section level2">
<h2><span class="header-section-number">4.9</span> Practice Exercises</h2>
</div>
<div id="homework-1" class="section level2">
<h2><span class="header-section-number">4.10</span> Homework</h2>
<p><strong>Exercise 3</strong> Learning objectives: create, subset, and manipulate vector contents and attributes; summarize vector data using R <code>table()</code> and other functions; generate basic graphics using vector data.</p>
<p><strong>Exercise 4</strong> Learning objectives: use functions to describe data frame characteristics; summarize and generate basic graphics for variables held in data frames; apply the subset function with logical operators; illustrate <code>NA</code>, <code>NaN</code>, <code>Inf</code>, and other special values occur; recognize the implications of using floating point arithmetic with logical operators.</p>
<p><strong>Exercise 5</strong> Learning objectives: practice with lists, data frames, and associated functions; summarize variables held in lists and data frames; work with R’s linear regression <code>lm()</code> function output; review logical subsetting of vectors for partitioning and assigning of new values; generate and visualize data from mathematical functions.</p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="15">
<li id="fn15"><p>Technically the objects described in this section are “atomic” vectors (all elements of the same type), since lists, to be described below, also are actually vectors. This will not be an important issue, and the shorter term vector will be used for atomic vectors below.<a href="structures.html#fnref15" class="footnote-back">↩</a></p></li>
<li id="fn16"><p>Missing data will be discussed in more detail later in the chapter.<a href="structures.html#fnref16" class="footnote-back">↩</a></p></li>
<li id="fn17"><p>The <code>mode</code> function returns the type or storage mode of an object.<a href="structures.html#fnref17" class="footnote-back">↩</a></p></li>
<li id="fn18"><p>Try this example using only single brackets<span class="math inline">\(\ldots\)</span> it will return a list holding elements <code>first</code>, <code>second</code>, and <code>pickle</code>.<a href="structures.html#fnref18" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="scripts-and-r-markdown.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="graphics-in-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/yihui/bookdown-crc/edit/master/04-dataStructures.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown.pdf", "bookdown.epub"],
"toc": {
"collapse": "none"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
